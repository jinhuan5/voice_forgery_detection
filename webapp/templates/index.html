<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Voice Forger â€” å®˜æ–¹é¦–é¡µ</title>
    <!-- æ³¨æ„ï¼šä¿æŒä½ åŸæ¥çš„ style.css ä¸è¦æ”¹ -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- TOP NAV (ä¿æŒä¸å˜) -->
<header class="apple-nav">
    <div class="nav-inner">
        <div class="nav-logo">VF</div>
        <nav>
            <a href="#hero-light">é¦–é¡µ</a>
            <a href="#hero-dark">æ¼”ç¤º</a>
            <a href="#grid-section">åŠŸèƒ½</a>
            <a href="#tech">æŠ€æœ¯</a>
            <a href="#demo">Demo / éƒ¨ç½²</a>
            <a href="#about">å…³äº</a>
        </nav>
    </div>
</header>

<!-- HERO 1 - LIGHT (åŸæ ·) -->
<section id="hero-light" class="hero-light" aria-label="ä¸»è§†è§‰(æµ…)">
    <h1>è®©è¯­éŸ³ï¼Œæ›´å®‰å…¨ã€‚</h1>
    <p class="sub">Voice Forgery Detection â€” ä¸“ä¸šçš„æ·±åº¦ä¼ªé€ è¯­éŸ³æ£€æµ‹ç³»ç»Ÿã€‚</p>
    <div class="buttons">
        <a class="btn-primary" href="#grid-section">äº†è§£æ›´å¤š</a>
        <a class="btn-secondary" href="https://github.com/jinhuan5/voice_forgery_detection.git" target="_blank">Github</a>
    </div>
</section>

<!-- HERO 2 - DARK PRODUCT (åŸæ ·) -->
<section id="hero-dark" class="hero-dark" aria-label="äº§å“å±•ç¤º(æš—)">
    <h2>Voice Detect Pro</h2>
    <p class="sub">All out Detection. Ultra Accuracy.</p>

    <div class="buttons">
        <a class="btn-primary" href="#demo">è¿›å…¥æ¼”ç¤º</a>
        <a class="btn-secondary" href="#download">ä¸‹è½½</a>
    </div>

    <div class="hero-img" role="img" aria-label="äº§å“æ¸²æŸ“å›¾"></div>
</section>
<!-- GRID SECTION (2 x 3 Apple-style cards) -->
<section id="grid-section" class="grid-section">

    <!-- Card 1: Voice Forgery Detection -->
    <div class="grid-card light">
        <h3>Voice Forgery Detection</h3>
        <p class="sub">å®æ—¶/æ‰¹é‡éŸ³é¢‘æ£€æµ‹ï¼Œæ”¯æŒå¤šç§é‡‡æ ·ç‡ä¸æ ¼å¼ï¼›æä¾›æ£€æµ‹ç½®ä¿¡åº¦ä¸å¯è§†åŒ–é¢‘è°±å¯¹æ¯”ã€‚</p>
        <p style="margin-top:8px; color:rgba(0,0,0,0.6); font-size:12px;">é¢‘è°±ç‰¹å¾ Â· MFCC Â· æ—¶é¢‘åŸŸåˆ†æ Â· XGBoost/LightGBM/NN</p>
        <div class="buttons">
            <a class="btn-primary" href="javascript:void(0)" onclick="document.getElementById('card1File').click()">å¼€å§‹æ£€æµ‹</a>
            <a class="btn-secondary" href="https://github.com/jinhuan5/voice_forgery_detection.git" target="_blank">æŸ¥çœ‹ä»£ç </a>
        </div>
        <div class="card-img img1"></div>
    </div>

    <!-- Card 2: Audio Analyzer -->
    <div class="grid-card blue">
        <h3>Audio Analyzer Pro</h3>
        <p class="sub">é¢‘è°±ã€å£°è°±å›¾ã€å¯¹æ¯”æ ‡æ³¨ä¸å†³ç­–å¯è§†åŒ–ï¼Œå¸®åŠ©ç ”ç©¶è€…å¿«é€Ÿå®šä½åˆ¤åˆ«ç‰¹å¾ã€‚</p>
        <p style="margin-top:8px; color:rgba(0,0,0,0.6); font-size:12px;">äº¤äº’å¼é¢‘è°± Â· é˜ˆå€¼å¯è°ƒ Â· å¯¼å‡ºå›¾ç‰‡ä¸æŠ¥å‘Š</p>
        <div class="buttons">
            <a class="btn-primary" href="#">å¼€å§‹åˆ†æ</a>
            <a class="btn-secondary" href="#">äº†è§£æ›´å¤š</a>
        </div>
        <div class="card-img img2"></div>
    </div>

    <!-- Card 3: Real-time Detection -->
    <div class="grid-card light">
        <h3>å®æ—¶ä¼ªé€ æ£€æµ‹</h3>
        <p class="sub">æä¾›æ•°æ®é¢„å¤„ç†ã€æ•°æ®å¢å¼ºã€è®­ç»ƒè„šæœ¬ä¸è¯„ä¼°æŠ¥å‘Šï¼Œæ”¯æŒäº¤å‰éªŒè¯ä¸æ··æ·†çŸ©é˜µå¯¼å‡ºã€‚</p>
        <p style="margin-top:8px; color:rgba(0,0,0,0.6); font-size:12px;">å¯å¤ç°è®­ç»ƒæµç¨‹ Â· æ¨¡å‹æŒä¹…åŒ–(.pkl) Â· scalerç®¡ç†</p>
        <div class="buttons">
            <a class="btn-primary" href="#">ç«‹å³ä½“éªŒ</a>
        </div>
        <div class="card-img img3"></div>
    </div>

    <!-- Card 4: Dataset Tools -->
    <div class="grid-card white">
        <h3>æ•°æ®é›†æ¸…æ´—å·¥å…·</h3>
        <p class="sub">è‡ªåŠ¨è¿‡æ»¤å™ªå£°ã€å‰ªåˆ‡ã€æ ‡æ³¨æ·±åº¦ä¼ªé€ éŸ³é¢‘ã€‚</p>
        <div class="buttons">
            <a class="btn-primary" href="https://github.com/jinhuan5/voice_forgery_detection.git" target="_blank">æ‰“å¼€å·¥å…·</a>
            <a class="btn-secondary" href="https://github.com/jinhuan5/voice_forgery_detection.git" target="_blank">æŸ¥çœ‹æ–‡æ¡£</a>
        </div>
        <div class="card-img img4"></div>
    </div>

    <!-- Card 5: Model Training -->
    <div class="grid-card light">
        <h3>æ¨¡å‹è®­ç»ƒå¹³å°</h3>
        <p class="sub">å¯è§†åŒ–è®­ç»ƒæ›²çº¿ï¼Œå¤šæ¨¡å‹å¯¹æ¯”å®éªŒã€‚</p>
        <div class="buttons">
            <a class="btn-primary" href="#">å¼€å§‹è®­ç»ƒ</a>
        </div>
        <div class="card-img img5"></div>
    </div>

    <!-- Card 6: API Service -->
    <div class="grid-card white">
        <h3>API æ¥å£æœåŠ¡</h3>
        <p class="sub">ä¸€è¡Œä»£ç æ¥å…¥è¯­éŸ³ä¼ªé€ æ£€æµ‹èƒ½åŠ›ã€‚</p>
        <div class="buttons">
            <a class="btn-primary" href="#">æŸ¥çœ‹ API</a>
            <a class="btn-secondary" href="#">ç”³è¯· Key</a>
        </div>
        <div class="card-img img6"></div>
    </div>

</section>

<!-- SECTION 4: TECHNOLOGY / SPECS -->
<section id="tech" style="background:#f9fafb; padding:100px 20px;">
    <div style="max-width:1100px; margin:0 auto;">
        <h2 style="font-size:42px; margin-bottom:18px">æŠ€æœ¯äº®ç‚¹</h2>
        <p style="font-size:18px; color:rgba(0,0,0,0.7); margin-bottom:28px">é›†æˆéŸ³é¢‘ä¿¡å·å¤„ç†ä¸æœºå™¨å­¦ä¹ ï¼Œé¢å‘ç ”ç©¶ä¸äº§å“åŒ–éƒ¨ç½²ã€‚</p>

        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:18px;">
            <div class="card" style="padding:20px;">
                <div style="font-weight:600; font-size:18px">é«˜ç²¾åº¦åˆ†ç±»</div>
                <div style="color:rgba(0,0,0,0.6); margin-top:8px">ç»“åˆé¢‘è°±ç‰¹å¾ä¸æ¨¡å‹èåˆæå‡æ£€æµ‹å‡†ç¡®ç‡ä¸æ³›åŒ–ã€‚</div>
            </div>

            <div class="card" style="padding:20px;">
                <div style="font-weight:600; font-size:18px">å®æ—¶æ€§èƒ½</div>
                <div style="color:rgba(0,0,0,0.6); margin-top:8px">æ”¯æŒæµå¼è¾“å…¥ä¸ä½å»¶è¿Ÿæ¨ç†ï¼ˆå¯ç”¨äºå®æ—¶ç›‘æµ‹ä¸æŠ¥è­¦ï¼‰ã€‚</div>
            </div>

            <div class="card" style="padding:20px;">
                <div style="font-weight:600; font-size:18px">æ˜“äºé›†æˆ</div>
                <div style="color:rgba(0,0,0,0.6); margin-top:8px">æä¾› REST API / Flask Demo / å¯æ‰“åŒ…çš„æ¨¡å‹æ–‡ä»¶ (.pkl/.joblib)ã€‚</div>
            </div>
        </div>

        <!-- small spec table -->
        <div style="margin-top:34px; display:flex; gap:18px; flex-wrap:wrap;">
            <div style="flex:1; min-width:260px; background:white; padding:18px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.06);">
                <div style="font-weight:600; margin-bottom:10px">è¾“å…¥æ ¼å¼</div>
                <ul style="color:rgba(0,0,0,0.7); margin:0 0 0 18px;">
                    <li>WAV / MP3 / FLAC æ”¯æŒ</li>
                    <li>é‡‡æ ·ç‡ï¼š8kHz - 48kHz</li>
                    <li>å•å£°é“ / ç«‹ä½“å£°</li>
                </ul>
            </div>

            <div style="flex:1; min-width:260px; background:white; padding:18px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.06);">
                <div style="font-weight:600; margin-bottom:10px">æ¨¡å‹ä¸ä¾èµ–</div>
                <ul style="color:rgba(0,0,0,0.7); margin:0 0 0 18px;">
                    <li>å¸¸ç”¨æ¨¡å‹ï¼šXGBoost / LightGBM / CNN</li>
                    <li>ä¾èµ–ï¼šnumpy, scipy, librosa, scikit-learn, flask</li>
                    <li>éƒ¨ç½²ï¼šDocker / Heroku / Vercel (å‰ç«¯)</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- SECTION 5: DEMO & DEPLOY -->
<section id="demo" style="padding:100px 20px;">
    <div style="max-width:1100px; margin:0 auto;">
        <h2 style="font-size:42px; margin-bottom:8px">åœ¨çº¿ Demo ä¸å¿«é€Ÿéƒ¨ç½²</h2>
        <p style="color:rgba(0,0,0,0.7); margin-bottom:20px">å¿«é€Ÿä½“éªŒæˆ–å°†é¡¹ç›®éƒ¨ç½²åˆ°ä½ çš„æœåŠ¡å™¨ / æœ¬åœ°ç¯å¢ƒã€‚</p>

        <div style="display:flex; gap:18px; flex-wrap:wrap;">
            <!-- Voice Detection Demo Card -->
            <div style="flex:2; min-width:400px; background:white; padding:20px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.06);">
                <div style="font-weight:600; margin-bottom:8px">è¯­éŸ³ä¼ªé€ æ£€æµ‹æ¼”ç¤º</div>
                <p style="color:rgba(0,0,0,0.6); margin-bottom:16px">ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶ï¼Œä½“éªŒAIé©±åŠ¨çš„è¯­éŸ³ä¼ªé€ æ£€æµ‹æŠ€æœ¯</p>

                <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                <div style="border:2px dashed #0071e3; border-radius:8px; padding:20px; text-align:center; margin-bottom:16px; cursor:pointer;" onclick="document.getElementById('audioFile').click()">
                    <div style="color:#0071e3; font-size:14px; margin-bottom:8px;">ğŸ“ ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶</div>
                    <div style="color:rgba(0,0,0,0.5); font-size:12px;">æ”¯æŒ WAV, MP3, M4A, FLAC, OGG æ ¼å¼</div>
                    <input type="file" id="audioFile" accept=".wav,.mp3,.m4a,.flac,.ogg" style="display:none" onchange="handleFileSelect(this)">
                </div>

                <!-- ä¸Šä¼ çŠ¶æ€ -->
                <div id="uploadStatus" style="display:none; margin-bottom:16px;">
                    <div style="display:flex; align-items:center; gap:8px;">
                        <div id="statusIcon"></div>
                        <div id="statusText"></div>
                    </div>
                </div>

                <!-- æ£€æµ‹ç»“æœ -->
                <div id="detectionResult" style="display:none; background:#f5f5f7; border-radius:8px; padding:16px; margin-bottom:16px;">
                    <div style="font-weight:600; margin-bottom:8px;">æ£€æµ‹ç»“æœ</div>
                    <div id="resultContent"></div>
                </div>

                <!-- é¢‘è°±å›¾ -->
                <div id="spectrogramContainer" style="display:none; margin-bottom:16px;">
                    <div style="font-weight:600; margin-bottom:8px;">éŸ³é¢‘åˆ†æå›¾è¡¨</div>
                    <div id="spectrogramImages" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:12px;"></div>
                </div>

                <div style="margin-top:12px;">
                    <button id="detectButton" class="btn-primary" style="display:none;" onclick="detectAudio()">å¼€å§‹æ£€æµ‹</button>
                    <button id="resetButton" class="btn-secondary" style="display:none; margin-left:8px;" onclick="resetDemo()">é‡æ–°ä¸Šä¼ </button>
                </div>
            </div>
            <div style="flex:1; min-width:280px; max-width:400px; background:white; padding:20px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.06); word-wrap:break-word;">
                <div style="font-weight:600; margin-bottom:8px">ä¸‰æ­¥å¿«é€Ÿéƒ¨ç½²</div>
                <ol style="color:rgba(0,0,0,0.7); margin-left:18px; font-size:14px; line-height:1.5;">
                    <li style="margin-bottom:8px;">å…‹éš†ä»“åº“ï¼š<br/><code style="font-size:12px; padding:2px 4px; background:#f5f5f7; border-radius:3px; word-break:break-all;">git clone https://github.com/jinhuan5/voice_forgery_detection.git</code></li>
                    <li style="margin-bottom:8px;">å®‰è£…ä¾èµ–ï¼š<br/><code style="font-size:12px; padding:2px 4px; background:#f5f5f7; border-radius:3px;">pip install -r requirements.txt</code></li>
                    <li>è¿è¡ŒæœåŠ¡ï¼š<br/><code style="font-size:12px; padding:2px 4px; background:#f5f5f7; border-radius:3px;">python run_project.py</code></li>
                </ol>
                <div style="margin-top:12px;">
                    <a class="btn-primary" href="https://github.com/jinhuan5/voice_forgery_detection.git" target="_blank">æŸ¥çœ‹éƒ¨ç½²æŒ‡å—</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript for Voice Detection -->
<script>
let selectedFile = null;
let card1File = null;
let card2File = null;
let card3File = null;

// å¡ç‰‡1åŠŸèƒ½ - Voice Forgery Detection
function handleCard1Upload(input) {
    const file = input.files[0];
    if (file) {
        card1File = file;

        // æ˜¾ç¤ºä¸Šä¼ çŠ¶æ€
        const uploadZone = input.parentElement;
        uploadZone.innerHTML = `
            <div style="color: #28a745; font-size: 14px; margin-bottom: 4px;">âœ… ${file.name}</div>
            <div style="color: rgba(0,0,0,0.5); font-size: 12px;">ç‚¹å‡»é‡æ–°é€‰æ‹©æ–‡ä»¶</div>
        `;
        uploadZone.onclick = () => document.getElementById('card1File').click();

        // æ˜¾ç¤ºæ£€æµ‹æŒ‰é’®
        document.getElementById('card1DetectBtn').style.display = 'block';
        document.getElementById('card1Result').style.display = 'none';
    }
}

function detectCard1() {
    if (!card1File) return;

    const detectBtn = document.getElementById('card1DetectBtn');
    const resultDiv = document.getElementById('card1Result');
    const contentDiv = document.getElementById('card1ResultContent');

    detectBtn.disabled = true;
    detectBtn.textContent = 'æ£€æµ‹ä¸­...';

    const formData = new FormData();
    formData.append('file', card1File);

    fetch('http://localhost:5000/upload', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        console.log('å“åº”çŠ¶æ€:', response.status, response.statusText);
        console.log('å“åº”å¤´:', response.headers.get('content-type'));

        if (!response.ok) {
            throw new Error(`HTTPé”™è¯¯! çŠ¶æ€: ${response.status}`);
        }

        // æ£€æŸ¥å“åº”å†…å®¹ç±»å‹
        const contentType = response.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
            console.warn('å“åº”ä¸æ˜¯JSONæ ¼å¼ï¼Œå†…å®¹ç±»å‹:', contentType);
            throw new Error('å“åº”æ ¼å¼é”™è¯¯ï¼šä¸æ˜¯JSONæ ¼å¼');
        }

        return response.json().catch(parseError => {
            console.error('JSONè§£æå¤±è´¥:', parseError);
            console.log('å“åº”æ–‡æœ¬:', response.text ? response.text() : 'æ— æ³•è·å–å“åº”æ–‡æœ¬');
            throw new Error(`JSONè§£æå¤±è´¥: ${parseError.message}`);
        });
    })
    .then(data => {
        console.log('æ£€æµ‹å“åº”æ•°æ®:', data); // æ·»åŠ è°ƒè¯•æ—¥å¿—
        console.log('data.success:', data.success);
        console.log('data.result:', data.result);

        // æ›´è¯¦ç»†çš„æ£€æŸ¥
        if (data && data.success === true) {
            console.log('æ£€æµ‹æˆåŠŸï¼Œæ˜¾ç¤ºç»“æœ');
            if (data.result) {
                showCard1Result(data);
            } else {
                console.log('ç»“æœæ•°æ®ç¼ºå¤±');
                contentDiv.innerHTML = `
                    <div style="color:#dc3545;">âŒ ç»“æœæ•°æ®ç¼ºå¤±</div>
                    <div style="color:rgba(0,0,0,0.6); margin-top:4px; font-size:12px;">æ£€æµ‹æˆåŠŸä½†ç»“æœæ•°æ®ä¸å®Œæ•´</div>
                `;
            }
        } else {
            console.log('æ£€æµ‹å¤±è´¥:', data.error);
            contentDiv.innerHTML = `
                <div style="color:#dc3545;">âŒ æ£€æµ‹å¤±è´¥</div>
                <div style="color:rgba(0,0,0,0.6); margin-top:4px; font-size:12px;">${data.error || 'æœªçŸ¥é”™è¯¯'}</div>
            `;
        }
        resultDiv.style.display = 'block';
    })
    .catch(error => {
        console.error('æ£€æµ‹å¤±è´¥:', error);
        console.error('é”™è¯¯ç±»å‹:', error.name);
        console.error('é”™è¯¯ä¿¡æ¯:', error.message);
        console.error('é”™è¯¯å †æ ˆ:', error.stack);

        let errorMessage = 'æœªçŸ¥é”™è¯¯';
        if (error.message) {
            errorMessage = error.message;
        } else if (error.name === 'TypeError') {
            errorMessage = 'ç½‘ç»œè¿æ¥é”™è¯¯';
        }

        contentDiv.innerHTML = `
            <div style="color:#dc3545;">âŒ æ£€æµ‹å¤±è´¥</div>
            <div style="color:rgba(0,0,0,0.6); margin-top:4px; font-size:12px;">${errorMessage}</div>
        `;
        resultDiv.style.display = 'block';
    })
    .finally(() => {
        detectBtn.disabled = false;
        detectBtn.textContent = 'å¼€å§‹æ£€æµ‹';
    });
}

function showCard1Result(data) {
    const contentDiv = document.getElementById('card1ResultContent');

    let resultHTML = '';
    if (data.result.is_fake === false || data.result.is_fake === 0) {
        resultHTML = `
            <div style="color:#28a745; font-weight:600;">âœ… çœŸå®è¯­éŸ³</div>
            <div style="color:rgba(0,0,0,0.6); margin-top:4px; font-size:12px;">çœŸå®åº¦: ${(data.result.real_probability * 100).toFixed(1)}%</div>
        `;
    } else {
        resultHTML = `
            <div style="color:#dc3545; font-weight:600;">âš ï¸ ä¼ªé€ è¯­éŸ³</div>
            <div style="color:rgba(0,0,0,0.6); margin-top:4px; font-size:12px;">ä¼ªé€ åº¦: ${(data.result.fake_probability * 100).toFixed(1)}%</div>
        `;
    }

    contentDiv.innerHTML = resultHTML;
}

function handleFileSelect(input) {
    const file = input.files[0];
    if (file) {
        selectedFile = file;
        showUploadStatus('æ­£åœ¨ä¸Šä¼ æ–‡ä»¶...', 'â³');

        // æ¨¡æ‹Ÿä¸Šä¼ å»¶è¿Ÿ
        setTimeout(() => {
            showUploadStatus('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼', 'âœ…');
            document.getElementById('detectButton').style.display = 'inline-block';
            document.getElementById('resetButton').style.display = 'inline-block';
        }, 1000);
    }
}

function showUploadStatus(message, icon) {
    document.getElementById('uploadStatus').style.display = 'block';
    document.getElementById('statusIcon').textContent = icon;
    document.getElementById('statusText').textContent = message;
}

function detectAudio() {
    if (!selectedFile) return;

    showUploadStatus('æ­£åœ¨æ£€æµ‹éŸ³é¢‘...', 'ğŸ”');
    document.getElementById('detectButton').disabled = true;

    const formData = new FormData();
    formData.append('file', selectedFile);

    fetch('http://localhost:5000/upload', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showResult(data);
            showUploadStatus('æ£€æµ‹å®Œæˆï¼', 'âœ…');
        } else {
            showUploadStatus('æ£€æµ‹å¤±è´¥ï¼š' + (data.error || 'æœªçŸ¥é”™è¯¯'), 'âŒ');
            showErrorResult();
        }
    })
    .catch(error => {
        console.error('æ£€æµ‹å¤±è´¥:', error);
        showUploadStatus('æ£€æµ‹å¤±è´¥ï¼Œè¯·é‡è¯•', 'âŒ');
        showErrorResult();
    })
    .finally(() => {
        document.getElementById('detectButton').disabled = false;
    });
}

function showResult(data) {
    const resultDiv = document.getElementById('detectionResult');
    const contentDiv = document.getElementById('resultContent');

    let resultHTML = '';
    let statusColor = '';
    let statusIcon = '';

    // æ ¹æ®is_fakeå­—æ®µåˆ¤æ–­ï¼Œè€Œä¸æ˜¯prediction
    if (data.result.is_fake === false || data.result.is_fake === 0) {
        // çœŸå®è¯­éŸ³
        statusColor = '#28a745';
        statusIcon = 'âœ…';
        resultHTML = `
            <div style="color:${statusColor}; font-weight:600;">${statusIcon} çœŸå®è¯­éŸ³</div>
            <div style="color:rgba(0,0,0,0.6); margin-top:4px;">çœŸå®åº¦: ${(data.result.real_probability * 100).toFixed(1)}%</div>
            <div style="color:rgba(0,0,0,0.6); font-size:12px; margin-top:2px;">ä¼ªé€ åº¦: ${(data.result.fake_probability * 100).toFixed(1)}%</div>
        `;
    } else {
        // ä¼ªé€ è¯­éŸ³
        statusColor = '#dc3545';
        statusIcon = 'âš ï¸';
        resultHTML = `
            <div style="color:${statusColor}; font-weight:600;">${statusIcon} ä¼ªé€ è¯­éŸ³</div>
            <div style="color:rgba(0,0,0,0.6); margin-top:4px;">ä¼ªé€ åº¦: ${(data.result.fake_probability * 100).toFixed(1)}%</div>
            <div style="color:rgba(0,0,0,0.6); font-size:12px; margin-top:2px;">çœŸå®åº¦: ${(data.result.real_probability * 100).toFixed(1)}%</div>
        `;
    }

    contentDiv.innerHTML = resultHTML;
    resultDiv.style.display = 'block';

    // æ˜¾ç¤ºé¢‘è°±å›¾
    if (data.spectrogram) {
        showSpectrogram(data.spectrogram);
    }
}

function showErrorResult() {
    const resultDiv = document.getElementById('detectionResult');
    const contentDiv = document.getElementById('resultContent');

    contentDiv.innerHTML = `
        <div style="color:#dc3545;">âŒ æ£€æµ‹å¤±è´¥</div>
        <div style="color:rgba(0,0,0,0.6); margin-top:4px;">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•</div>
    `;
    resultDiv.style.display = 'block';
}

function showSpectrogram(spectrogram) {
    const container = document.getElementById('spectrogramContainer');
    const imagesDiv = document.getElementById('spectrogramImages');

    imagesDiv.innerHTML = '';

    // æ˜¾ç¤ºé¢‘è°±å›¾
    if (spectrogram) {
        const div = document.createElement('div');
        div.innerHTML = `
            <div style="text-align:center;">
                <div style="font-size:12px; color:rgba(0,0,0,0.6); margin-bottom:4px;">éŸ³é¢‘é¢‘è°±åˆ†æ</div>
                <img src="data:image/png;base64,${spectrogram}" style="width:100%; max-width:400px; border-radius:4px;"/>
            </div>
        `;
        imagesDiv.appendChild(div);
    }

    container.style.display = 'block';
}

function resetDemo() {
    selectedFile = null;
    document.getElementById('audioFile').value = '';
    document.getElementById('uploadStatus').style.display = 'none';
    document.getElementById('detectionResult').style.display = 'none';
    document.getElementById('spectrogramContainer').style.display = 'none';
    document.getElementById('detectButton').style.display = 'none';
    document.getElementById('resetButton').style.display = 'none';
}

// æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½
document.addEventListener('DOMContentLoaded', function() {
    const uploadArea = document.querySelector('[onclick="document.getElementById(\'audioFile\').click()"]');

    uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.style.borderColor = '#0051a2';
        this.style.backgroundColor = '#f0f7ff';
    });

    uploadArea.addEventListener('dragleave', function(e) {
        e.preventDefault();
        this.style.borderColor = '#0071e3';
        this.style.backgroundColor = 'transparent';
    });

    uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        this.style.borderColor = '#0071e3';
        this.style.backgroundColor = 'transparent';

        const files = e.dataTransfer.files;
        if (files.length > 0) {
            const file = files[0];
            const allowedTypes = ['.wav', '.mp3', '.m4a', '.flac', '.ogg'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();

            if (allowedTypes.includes(fileExtension)) {
                selectedFile = file;
                showUploadStatus('æ­£åœ¨ä¸Šä¼ æ–‡ä»¶...', 'â³');

                setTimeout(() => {
                    showUploadStatus('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼', 'âœ…');
                    document.getElementById('detectButton').style.display = 'inline-block';
                    document.getElementById('resetButton').style.display = 'inline-block';
                }, 1000);
            } else {
                showUploadStatus('ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼', 'âŒ');
            }
        }
    });
});
</script>

<!-- SECTION 6: ABOUT / CONTACT -->
<section id="about" style="background:#f5f5f7; padding:80px 20px;">
    <div style="max-width:1100px; margin:0 auto; display:flex; gap:24px; flex-wrap:wrap; align-items:center;">
        <div style="flex:1; min-width:320px;">
            <h2 style="font-size:36px; margin-bottom:10px">å…³äº & è”ç³»</h2>
            <p style="color:rgba(0,0,0,0.7); margin-bottom:16px">æˆ‘æ˜¯ä¿¡æ¯å®‰å…¨/è¯­éŸ³å¤„ç†ç ”ç©¶è€…ï¼ˆæˆ–å­¦ç”Ÿï¼‰ï¼Œæ¬¢è¿åˆä½œã€é—®é¢˜åé¦ˆä¸å­¦æœ¯äº¤æµã€‚</p>
            <p style="color:rgba(0,0,0,0.7); margin-bottom:16px"><strong>Emailï¼š</strong> youremail@example.com</p>
            <div style="display:flex; gap:10px;">
                <a class="btn-primary" href="mailto:youremail@example.com">å‘é€é‚®ä»¶</a>
                <a class="btn-secondary" href="https://github.com/jinhuan5" target="_blank">GitHub</a>
            </div>
        </div>

        <div style="width:320px; min-width:260px;">
            <div style="background:white; padding:18px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.06);">
                <div style="font-weight:600; margin-bottom:8px">é¡¹ç›®å¿«è§ˆ</div>
                <div style="color:rgba(0,0,0,0.7);">
                    <div>â­ Stars: â€”</div>
                    <div>ğŸ´ Forks: â€”</div>
                    <div>ğŸ”„ æœ€è¿‘æäº¤: â€”</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FOOTER (ä¿ç•™/è½»å¾®è°ƒæ•´å†…å®¹) -->
<footer style="background:transparent; padding:36px 20px;">
    <div style="max-width:1100px; margin:0 auto; color:rgba(0,0,0,0.6); text-align:center;">
        Â© <span id="year"></span> Voice Forger. ç‰ˆæƒæ‰€æœ‰ã€‚
    </div>
</footer>

<script>
    // ä¿æŒæœ€å°‘ JSï¼šå¹´ã€æ»šåŠ¨åˆ°é”šç‚¹å¹³æ»‘
    document.getElementById('year').textContent = new Date().getFullYear();
    // å¹³æ»‘æ»šåŠ¨ï¼ˆç°ä»£æµè§ˆå™¨ï¼‰
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
        a.addEventListener('click', function(e){
            const t = document.querySelector(this.getAttribute('href'));
            if(t){
                e.preventDefault();
                t.scrollIntoView({behavior:'smooth', block:'start'});
            }
        });
    });
</script>

</body>
</html>
